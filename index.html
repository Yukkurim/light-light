<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>電光掲示板</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background-color: #111;
      font-family: monospace;
      color: white;
      height: 100%;
      overflow: hidden;
    }

    #main-container {
      display: flex;
      flex-direction: column;
      height: 100%;
      justify-content: flex-start;
      align-items: center;
      overflow: hidden;
      padding: 20px;
      box-sizing: border-box;
    }

    #frame {
      margin: 0;
      width: 100%;
      height: 150px;
      background-color: black;
      position: relative;
      overflow: hidden;
      border-right: 2px solid #555;
    }

    #scroll-text {
      position: absolute;
      white-space: nowrap;
      font-size: 64px;
      color: lime;
      top: 40px;
    }

    #control-panel {
      padding: 20px;
      background: #222;
      width: 100%;
      box-sizing: border-box;
      margin-top: 20px;
    }

    label, select, input, button {
      display: block;
      width: 100%;
      margin-bottom: 15px;
      font-size: 18px;
    }

    input, select {
      height: 40px;
    }

    button {
      background-color: #555;
      color: white;
      padding: 10px;
      border: none;
      cursor: pointer;
      font-size: 18px;
    }

    footer {
      height: 30px;
      background-color: #000;
      color: #999;
      text-align: right;
      padding-right: 15px;
      line-height: 30px;
      font-size: 14px;
      border-top: 1px solid #444;
      width: 100%;
    }

    #description {
      font-size: 18px;
      color: #fff;
      margin-top: 20px;
      text-align: center;
    }

    .extra-content {
      margin-top: 30px;
      font-size: 18px;
      color: #fff;
    }

    .extra-content h3 {
      margin-bottom: 10px;
    }

    .extra-content p {
      margin: 5px 0;
    }

    #github-link {
      margin-top: 20px;
      text-align: center;
    }

    #github-link a {
      color: #fff;
      font-size: 20px;
      padding: 15px 30px;
      background-color: #4CAF50;
      text-decoration: none;
      border-radius: 5px;
    }

    #github-link a:hover {
      background-color: #45a049;
    }
  </style>
</head>
<body>
  <div id="main-container">
    <div id="frame">
      <div id="scroll-text">☆電光掲示板へようこそ！まずは設定をしてみて下さい！作者のYoutubeチャンネルは下のボタンから☆</div>
    </div>

    <div id="control-panel">
      <label for="mode-select">表示モード:</label>
      <select id="mode-select">
        <option value="custom">カスタムメッセージ</option>
        <option value="time">現在の時刻</option>
        <option value="announcement">車内アナウンス</option>
        <option value="fortune">占い</option>
      </select>

      <div id="custom-input-group">
        <label for="custom-input">カスタムメッセージ:</label>
        <input type="text" id="custom-input" value="☆電光掲示板へようこそ！☆">
      </div>

      <label for="color-select">文字色:</label>
      <select id="color-select">
        <option value="lime">ライム</option>
        <option value="white">白</option>
        <option value="yellow">黄</option>
        <option value="red">赤</option>
        <option value="cyan">シアン</option>
      </select>

      <button id="update-btn">メッセージ更新</button>
    </div>

    <div id="description">
      <p>この電光掲示板は、カスタムメッセージ、現在の時刻、車内アナウンスのメッセージ（ランダム表示）や、面白い占い結果を表示します。あなたの好みに合わせて設定を変更し、楽しいメッセージをスクロール表示してみましょう！</p>
    </div>

    <div class="extra-content">
      <h3>設定できるモード:</h3>
      <p><strong>占い:</strong> あなたの運勢を占ってみましょう！ランダムな結果を表示します。</p>
      <p><strong>車内アナウンス:</strong> 車内のアナウンスのメッセージをランダムに表示します。</p>
      <p><strong>現在の時刻:</strong> 時刻を表示することができます。</p>
      <p><strong>カスタムメッセージ:</strong> 自分だけのメッセージを表示できます！</p>
    </div>

    <div id="github-link">
      <a href="https://youtube.com/channel/UCqzUSsyLcp8Bo6sDrvQM1gw?si=HIo5I_ecyP_Ygqfv" target="_blank">YouTube チャンネルを訪れる</a>
    </div>
  </div>

  <footer>© ゆっくりーむ</footer>

  <script>
    const textElem = document.getElementById("scroll-text");
    const frameWidth = document.getElementById("frame").offsetWidth;
    const modeSelect = document.getElementById("mode-select");
    const customInput = document.getElementById("custom-input");
    const colorSelect = document.getElementById("color-select");
    const updateBtn = document.getElementById("update-btn");

    let x = frameWidth;
    let scrollSpeed = 3; // スクロール速度（少し遅く設定）
    let animationFrameId;
    let lastMessage = ""; // 最後に表示したメッセージを記録

    // 車内アナウンスのメッセージリスト（80個）
    const announcements = [
      "次は、渋谷、渋谷です。",
      "お出口は左側です。",
      "次は、新宿、新宿です。",
      "ご乗車ありがとうございます。",
      "到着駅は、東京、東京です。",
      "この電車は快速列車です。",
      "お手荷物にご注意ください。",
      "前のドアを開けます。",
      "次は、大阪、大阪です。",
      "終点は、名古屋、名古屋です。",
      "立ち上がらないでください。",
      "次は、池袋、池袋です。",
      "全席指定席です。",
      "車内は禁煙です。",
      "ドアが閉まりますのでご注意ください。",
      "次は、横浜、横浜です。",
      "車内の音声案内をお聞きください。",
      "次は、千葉、千葉です。",
      "お乗り換えは、東京駅です。",
      "終点は、福岡、福岡です。",
      "次は、京都、京都です。",
      "車内の照明が暗くなります。",
      "車内にご用のある方は、車掌にお知らせください。",
      "降車される際は、お手回り品をお忘れなく。",
      "お手洗いは次の車両にございます。",
      "次は、札幌、札幌です。",
      "列車は、通常運行しています。",
      "次は、広島、広島です。",
      "お持ちの切符をご確認ください。",
      "終点は、仙台、仙台です。",
      "次は、渋谷、渋谷です。",
      "この電車は通勤快速です。",
      "次は、大阪、大阪です。",
      "本日もご利用いただき、ありがとうございます。",
      "次は、長野、長野です。",
      "ドアが開きますのでご注意ください。",
      "次は、名古屋、名古屋です。",
      "駅に到着後、しばらく停車いたします。",
      "お忘れ物がないようご確認ください。",
      "次は、福岡、福岡です。",
      "車内では、大きな音を出さないようお願いします。",
      "お手回り品の管理をお願いします。",
      "次は、神戸、神戸です。",
      "お乗り換えは、新宿駅です。",
      "車内での飲食はご遠慮ください。",
      "次は、福井、福井です。",
      "急停車の際は、手すりにつかまってください。",
      "この電車は、終点まで直通です。",
      "次は、静岡、静岡です。",
      "車両のドアが開きますので、ご注意ください。",
      "本日の運行は、通常通りです。",
      "終点は、京都、京都です。",
      "次は、愛知、愛知です。",
      "車内の案内が聞こえます。",
      "次は、青森、青森です。",
      "この電車は、各駅停車です。",
      "次は、奈良、奈良です。",
      "お疲れ様でした。",
      "次は、金沢、金沢です。",
      "停車中にお立ちになると危険です。",
      "次は、岐阜、岐阜です。",
      "車内に異常が発生した場合は、すぐに車掌にお知らせください。",
      "次は、茨城、茨茨です。",
    ];

    // 時刻の表示を更新する関数
    function updateTime() {
      if (modeSelect.value === "time") {
        const timeMessage = "☆現在の時刻は: " + new Date().toLocaleTimeString() + "です　本日もご利用いただきありがとうございます（？）☆";
        textElem.textContent = timeMessage;
        x = frameWidth; // 時刻更新時にはスクロール位置をリセット
      }
    }

    // 車内アナウンスのメッセージをランダムで取得
    function getRandomAnnouncement() {
      const randomIndex = Math.floor(Math.random() * announcements.length);
      return announcements[randomIndex];
    }

    // 占い結果をランダムに生成
    function getFortune() {
      const fortunes = [
        "大吉: 今日は何をしてもうまくいく日です。",
        "中吉: 多少の波乱があるかもしれませんが、乗り越えられるでしょう。",
        "小吉: 穏やかな日ですが、ちょっとした喜びがありそうです。",
        "凶: あまり無理をしない方が良さそうです。休養が大事。",
      ];
      const randomIndex = Math.floor(Math.random() * fortunes.length);
      return fortunes[randomIndex];
    }

    // モードに合わせたメッセージを取得
    function getMessage() {
      const mode = modeSelect.value;
      switch (mode) {
        case "time":
          updateTime(); // 時刻更新
          return; // メッセージは手動で更新
        case "announcement":
          return "☆" + getRandomAnnouncement() + "☆";
        case "fortune":
          return "☆占い結果は: " + getFortune() + "です　いい日になるといいね！☆";
        case "custom":
        default:
          return customInput.value || "☆メッセージを入力してください☆";
      }
    }

    // メッセージをスクロールさせる関数
    function moveText() {
      textElem.style.left = x + "px";
      x -= scrollSpeed;  // 速度は常に一定
      if (x < -textElem.offsetWidth) {
        x = frameWidth;  // 画面外に出たらリセット
        if (modeSelect.value === "announcement") {
          updateMessage();  // 車内アナウンスのメッセージをランダムに更新
        }
      }
      animationFrameId = requestAnimationFrame(moveText);
    }

    // 文字色の変更
    function updateTextColor() {
      const color = colorSelect.value;
      textElem.style.color = color;
    }

    // メッセージを更新
    function updateMessage() {
      const newMessage = getMessage();
      if (newMessage !== lastMessage) {  // メッセージが変更された場合のみ更新
        lastMessage = newMessage;
        textElem.textContent = newMessage;
        x = frameWidth;  // 更新時に位置をリセット
      }
    }

    // 初期表示ではメッセージを更新しない
    moveText();  // 初期メッセージのスクロールを開始

    // ボタンが押されたときにのみ更新
    updateBtn.addEventListener("click", updateMessage);

    // モード選択変更時にも更新
    modeSelect.addEventListener("change", updateMessage);

    // 色選択が変更された場合に色を更新
    colorSelect.addEventListener("change", updateTextColor);

    // 時刻の更新を1秒ごとに実行
    setInterval(updateTime, 1000);

  </script>
</body>
</html>
