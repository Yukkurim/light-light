<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>電光掲示板</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      background-color: #111;
      font-family: monospace;
      color: white;
      height: 100%;
      overflow: hidden;
    }
    #main-container {
      display: flex;
      flex-direction: column;
      height: 100%;
      justify-content: flex-start;
      align-items: center;
      overflow: hidden;
      padding: 20px;
      box-sizing: border-box;
    }
    #frame {
      margin: 0;
      width: 100%;
      height: 150px;
      background-color: black;
      position: relative;
      overflow: hidden;
      border-right: 2px solid #555;
    }
    #scroll-text {
      position: absolute;
      white-space: nowrap;
      font-size: 64px;
      color: lime;
      top: 40px;
    }
    #control-panel {
      padding: 20px;
      background: #222;
      width: 100%;
      box-sizing: border-box;
      margin-top: 20px;
    }
    label, select, input, button {
      display: block;
      width: 100%;
      margin-bottom: 15px;
      font-size: 18px;
    }
    input, select {
      height: 40px;
    }
    button {
      background-color: #555;
      color: white;
      padding: 10px;
      border: none;
      cursor: pointer;
      font-size: 18px;
    }
    footer {
      height: 30px;
      background-color: #000;
      color: #999;
      text-align: right;
      padding-right: 15px;
      line-height: 30px;
      font-size: 14px;
      border-top: 1px solid #444;
      width: 100%;
    }
  </style>
</head>
<body>

<div id="main-container">
  <div id="frame">
    <div id="scroll-text">☆電光掲示板へようこそ！まずは設定をしてみて下さい！☆</div>
  </div>

  <div id="control-panel">
    <label for="mode-select">表示モード:</label>
    <select id="mode-select">
      <option value="custom">カスタムメッセージ</option>
      <option value="time">現在の時刻</option>
      <option value="announcement">車内アナウンス</option>
      <option value="fortune">占い</option>
    </select>

    <div id="custom-input-group">
      <label for="custom-input">カスタムメッセージ:</label>
      <input type="text" id="custom-input" value="☆電光掲示板へようこそ！☆">
    </div>

    <label for="color-select">文字色:</label>
    <select id="color-select">
      <option value="lime">ライム</option>
      <option value="white">白</option>
      <option value="yellow">黄</option>
      <option value="red">赤</option>
      <option value="cyan">シアン</option>
    </select>
    
    <button id="update-btn">メッセージ更新</button>
  </div>
</div>

<footer>© ゆっくりーむ</footer>

<script>
  const textElem = document.getElementById("scroll-text");
  const frame = document.getElementById("frame");
  const frameWidth = frame.offsetWidth;
  const modeSelect = document.getElementById("mode-select");
  const customInput = document.getElementById("custom-input");
  const colorSelect = document.getElementById("color-select");
  const updateBtn = document.getElementById("update-btn");

  let x = frameWidth;
  let scrollSpeed = 2.5;
  let animationFrameId;
  let nextMessage = null;

  const announcements = [
    "次は、渋谷、渋谷です。",
    "お出口は左側です。",
    "ご乗車ありがとうございます。",
    "この電車は快速列車です。",
    "前のドアを開けます。",
    "終点は、名古屋、名古屋です。",
    "立ち上がらないでください。",
    "全席指定席です。",
    "車内は禁煙です。",
    "ドアが閉まりますのでご注意ください。",
    "車内の音声案内をお聞きください。",
    "お乗り換えは、東京駅です。",
    "車内の照明が暗くなります。",
    "降車される際は、お手回り品をお忘れなく。",
    "お手洗いは次の車両にございます。",
    "列車は、通常運行しています。",
    "お持ちの切符をご確認ください。",
    "駅に到着後、しばらく停車いたします。",
    "お忘れ物がないようご確認ください。",
    "車内では、大きな音を出さないようお願いします。",
    "お手回り品の管理をお願いします。",
    "車内での飲食はご遠慮ください。",
    "急停車の際は、手すりにつかまってください。",
    "この電車は、終点まで直通です。",
    "車両のドアが開きますので、ご注意ください。",
    "終点は、京都、京都です。",
    "車内の案内が聞こえます。",
    "この電車は、各駅停車です。",
    "お疲れ様でした。",
    "停車中にお立ちになると危険です。",
    "車内に異常が発生した場合は、すぐに車掌にお知らせください。",
    "車内では足元にご注意ください。",
    "お急ぎのお客様は、他の列車をご利用ください。",
    "車内では、携帯電話をマナーモードに設定してください。",
    "車内の温度にご注意ください。",
    "降車口は、左側です。",
  ];

  function getRandomAnnouncement() {
    return announcements[Math.floor(Math.random() * announcements.length)];
  }

  function getFortune() {
    const fortunes = [
      "大吉: 今日は何をしてもうまくいく日です。",
      "中吉: 波乱があっても乗り越えられるでしょう。",
      "小吉: 小さな幸運があるかも。",
      "凶: 無理せず休んでね。",
    ];
    return fortunes[Math.floor(Math.random() * fortunes.length)];
  }

  function getMessage() {
    const mode = modeSelect.value;
    switch (mode) {
      case "time":
        return "☆現在の時刻は: " + new Date().toLocaleTimeString() + "です☆";
      case "announcement":
        return "☆" + getRandomAnnouncement() + "☆";
      case "fortune":
        return "☆占い結果は: " + getFortune() + "☆";
      case "custom":
      default:
        return customInput.value || "☆メッセージを入力してください☆";
    }
  }

  function updateTextColor() {
    textElem.style.color = colorSelect.value;
  }

  function requestMessageUpdate() {
    nextMessage = getMessage();
    updateTextColor();
  }

  function moveText() {
    textElem.style.left = x + "px";
    x -= scrollSpeed;

    if (x < -textElem.offsetWidth) {
      x = frame.offsetWidth;

      if (nextMessage !== null) {
        textElem.textContent = nextMessage;
        nextMessage = null;
      }
    }

    animationFrameId = requestAnimationFrame(moveText);
  }

  updateTextColor();
  moveText();

  updateBtn.addEventListener("click", requestMessageUpdate);
</script>

</body>
</html>
